<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title></title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> API</a></li><li class="chapter-item expanded "><a href="deployment.html"><strong aria-hidden="true">2.</strong> Deployment</a></li><li class="chapter-item expanded "><a href="setting_up.html"><strong aria-hidden="true">3.</strong> Setting up Environment</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="cool-corridors-api"><a class="header" href="#cool-corridors-api">Cool Corridors API</a></h1>
<p>Welcome to the Cool Corridors API! </p>
<p>This project aims to inform NYC communities of Air Quality in their neighborhoods
using our very own IAQI score!</p>
<h2 id="rapidapi-users"><a class="header" href="#rapidapi-users">RapidAPI Users</a></h2>
<p>If you are a RapidAPI user, you can use the following url to access the API: https://coolcorridors.p.rapidapi.com. RapidAPI provides a gateway url that allows users to acces the API from within RapidAPI's website. </p>
<h2 id="api"><a class="header" href="#api">API</a></h2>
<p>The API lives on https://cool-corridors-api-service.onrender.com. This is the base url. All other endpoints are relative to this url.</p>
<h3 id="data"><a class="header" href="#data">Data</a></h3>
<p>PurpleAir returns their data as a json object formatted as such:</p>
<pre><code class="language-json">{
    // metadata
    &quot;fields&quot;: [
        &quot;name&quot;,
        &quot;location&quot;,
        &quot;pm2.5&quot;,
        &quot;temperature&quot;,
        ...
    ],
    &quot;location_types&quot;: [
        &quot;outside&quot;,
        &quot;inside&quot;
    ],
    // data is a list of lists. each list/array in data is the data for a certain sensor
    &quot;data&quot;: [
        [
            1284751,
            &quot;City College&quot;,
            56,
            ...
        ],
        ...
    ]

}

</code></pre>
<p>The <code>/score</code> endpoint will take the above json and format it into the following python dictionary:</p>
<pre><code class="language-py">    {
        &quot;zip_code&quot;: int,
        &quot;pm2.5&quot;: float,
        &quot;pm2.5_30minute&quot;: float,
        &quot;pm2.5_60minute&quot;: float,
        &quot;pm2.5_1week&quot;: float,
        &quot;temperature&quot;: int,
        &quot;IAQI&quot;: dict{
            &quot;score&quot;: int,
            &quot;category&quot;: str
            }
    }
</code></pre>
<p>The frontend will then take this json object and embed data into components in the HTML. Data is subject to change as we add different functionalities.</p>
<h2 id="endpoints"><a class="header" href="#endpoints">Endpoints</a></h2>
<!-- TODO: Move this somewhere more "fitting" -->
<details>
 <summary><code>GET</code> <code><b>/data?zipcode={zipcode}&read_key={read_key}</b></code></summary>
<h3 id="parameters"><a class="header" href="#parameters">Parameters</a></h3>
<blockquote>
<div class="table-wrapper"><table><thead><tr><th>name</th><th>type</th><th>data type</th><th>description</th></tr></thead><tbody>
<tr><td>zipcode</td><td>required</td><td>int</td><td>zipcode of user's location</td></tr>
<tr><td>api_key</td><td>required</td><td>string</td><td>user's purpleair API key</td></tr>
</tbody></table>
</div></blockquote>
<h3 id="responses"><a class="header" href="#responses">Responses</a></h3>
<blockquote>
<div class="table-wrapper"><table><thead><tr><th>http code</th><th>content-type</th><th>response</th></tr></thead><tbody>
<tr><td><code>200</code></td><td><code>application/json</code></td><td><code>JSON object</code></td></tr>
<tr><td><code>400</code></td><td><code>application/json</code></td><td><code>{error: &quot;Invalid zipcode&quot;}</code></td></tr>
<tr><td><code>400</code></td><td><code>application/json</code></td><td><code>{&quot;error&quot;: &quot;No sensors found within the range of &quot;x&quot; miles.&quot;}</code></td></tr>
<tr><td><code>400</code></td><td><code>application/json</code></td><td><code>{&quot;error&quot;: &quot;No read key or zipcode provided.&quot;}</code></td></tr>
</tbody></table>
</div></blockquote>
<h3 id="example-response"><a class="header" href="#example-response">Example response</a></h3>
<blockquote>
<pre><code class="language-py">   {
       &quot;zip_code&quot;: 11101,
       &quot;pm2.5&quot;: 2.4,
       &quot;pm2.5_30minute&quot;: 2.4,
       &quot;pm2.5_60minute&quot;: 2.6,
       &quot;pm2.5_1week&quot;: 3.4,
       &quot;temperature&quot;: 52,
       &quot;IAQI&quot;: {
           &quot;score&quot;: 105,
           &quot;descriptor&quot;: &quot;Good&quot;
          }
   }
</code></pre>
</blockquote>
</details>
<details>
 <summary><code>GET</code> <code><b>/score?zipcode={zipcode}&read_key={read_key}</b></code></summary>
<h3 id="parameters-1"><a class="header" href="#parameters-1">Parameters</a></h3>
<blockquote>
<div class="table-wrapper"><table><thead><tr><th>name</th><th>type</th><th>data type</th><th>description</th></tr></thead><tbody>
<tr><td>zipcode</td><td>required</td><td>int</td><td>zipcode of user's location</td></tr>
<tr><td>api_key</td><td>required</td><td>string</td><td>user's purpleair API key</td></tr>
</tbody></table>
</div></blockquote>
<h3 id="responses-1"><a class="header" href="#responses-1">Responses</a></h3>
<blockquote>
<div class="table-wrapper"><table><thead><tr><th>http code</th><th>content-type</th><th>response</th></tr></thead><tbody>
<tr><td><code>200</code></td><td><code>application/json</code></td><td><code>JSON object</code></td></tr>
<tr><td><code>400</code></td><td><code>application/json</code></td><td><code>{error: &quot;Invalid zipcode&quot;}</code></td></tr>
<tr><td><code>400</code></td><td><code>application/json</code></td><td><code>{&quot;error&quot;: &quot;No sensors found within the range of &quot;x&quot; miles.&quot;}</code></td></tr>
<tr><td><code>400</code></td><td><code>application/json</code></td><td><code>{&quot;error&quot;: &quot;No read key or zipcode provided.&quot;}</code></td></tr>
</tbody></table>
</div></blockquote>
<h3 id="example-response-1"><a class="header" href="#example-response-1">Example response</a></h3>
<blockquote>
<pre><code class="language-py">   {
       &quot;IAQI&quot;: 105,
       &quot;zipcode&quot;: 11101
   }
</code></pre>
</blockquote>
</details>
<details>
 <summary><code>GET</code> <code><b>/descriptor?zipcode={zipcode}&read_key={read_key}</b></code></summary>
<h3 id="parameters-2"><a class="header" href="#parameters-2">Parameters</a></h3>
<blockquote>
<div class="table-wrapper"><table><thead><tr><th>name</th><th>type</th><th>data type</th><th>description</th></tr></thead><tbody>
<tr><td>zipcode</td><td>required</td><td>int</td><td>zipcode of user's location</td></tr>
<tr><td>api_key</td><td>required</td><td>string</td><td>user's purpleair API key</td></tr>
</tbody></table>
</div></blockquote>
<h3 id="responses-2"><a class="header" href="#responses-2">Responses</a></h3>
<blockquote>
<div class="table-wrapper"><table><thead><tr><th>http code</th><th>content-type</th><th>response</th></tr></thead><tbody>
<tr><td><code>200</code></td><td><code>application/json</code></td><td><code>JSON object</code></td></tr>
<tr><td><code>400</code></td><td><code>application/json</code></td><td><code>{error: &quot;Invalid zipcode&quot;}</code></td></tr>
<tr><td><code>400</code></td><td><code>application/json</code></td><td><code>{&quot;error&quot;: &quot;No sensors found within the range of &quot;x&quot; miles.&quot;}</code></td></tr>
<tr><td><code>400</code></td><td><code>application/json</code></td><td><code>{&quot;error&quot;: &quot;No read key or zipcode provided.&quot;}</code></td></tr>
</tbody></table>
</div></blockquote>
<h3 id="example-response-2"><a class="header" href="#example-response-2">Example response</a></h3>
<blockquote>
<pre><code class="language-py">   {
       &quot;description&quot;: &quot;Good&quot;,
       &quot;zipcode&quot;: 11101
   }
</code></pre>
</blockquote>
</details>
<details>
 <summary><code>GET</code> <code><b>/color?zipcode={zipcode}&read_key={read_key}</b></code></summary>
<h3 id="parameters-3"><a class="header" href="#parameters-3">Parameters</a></h3>
<blockquote>
<div class="table-wrapper"><table><thead><tr><th>name</th><th>type</th><th>data type</th><th>description</th></tr></thead><tbody>
<tr><td>zipcode</td><td>required</td><td>int</td><td>zipcode of user's location</td></tr>
<tr><td>api_key</td><td>required</td><td>string</td><td>user's purpleair API key</td></tr>
</tbody></table>
</div></blockquote>
<h3 id="responses-3"><a class="header" href="#responses-3">Responses</a></h3>
<blockquote>
<div class="table-wrapper"><table><thead><tr><th>http code</th><th>content-type</th><th>response</th></tr></thead><tbody>
<tr><td><code>200</code></td><td><code>application/json</code></td><td><code>JSON object</code></td></tr>
<tr><td><code>400</code></td><td><code>application/json</code></td><td><code>{error: &quot;Invalid zipcode&quot;}</code></td></tr>
<tr><td><code>400</code></td><td><code>application/json</code></td><td><code>{&quot;error&quot;: &quot;No sensors found within the range of &quot;x&quot; miles.&quot;}</code></td></tr>
<tr><td><code>400</code></td><td><code>application/json</code></td><td><code>{&quot;error&quot;: &quot;No read key or zipcode provided.&quot;}</code></td></tr>
</tbody></table>
</div></blockquote>
<h3 id="example-response-3"><a class="header" href="#example-response-3">Example response</a></h3>
<blockquote>
<pre><code class="language-py">   {
       &quot;color&quot;: &quot;0xFF00FF&quot;,
       &quot;zipcode&quot;: 11101
   }
</code></pre>
</blockquote>
</details>
<h2 id="creating-a-new-api-endpoint"><a class="header" href="#creating-a-new-api-endpoint">Creating a new API endpoint</a></h2>
<p>All endpoints are defined inside <code>/src/app.py</code>. To create a new endpoint, simply create a new function and add a new route to the <code>app</code> object. </p>
<p>For example, to create a new endpoint called <code>/test</code>, you would do the following:</p>
<pre><code class="language-py">@app.route(&quot;/test&quot;)
def test():
    return &quot;Hello World!&quot;
</code></pre>
<p>This creates a new endpoint called <code>/test</code> that returns the string &quot;Hello World!&quot; when called.</p>
<p>The function name can be anything, but it is recommended to keep it consistent with the endpoint name.</p>
<p>Flask offers many different ways to return data. For more information, see the <a href="https://flask.palletsprojects.com/en/2.2.x/quickstart/">Flask documentation</a>. </p>
<p>You can:</p>
<ul>
<li>return a string literal</li>
<li>return a json object</li>
<li>render a template (html file)</li>
<li>redirect to a different route or url</li>
<li>return a file</li>
<li>etc...</li>
</ul>
<h2 id="helper-functions"><a class="header" href="#helper-functions">Helper Functions</a></h2>
<p>There are a few helper functions that are used throughout the codebase. These functions are defined in <code>/src/helpers.py</code>.</p>
<p>It is recommended to  define new endpoints in <code>/src/app.py</code>, and define any helper functions in <code>/src/helpers.py</code> to keep the codebase organized.</p>
<p>Our main helper function is <code>get_info()</code>. This function does most of the heavy lifting for the API endpoints. </p>
<p>We begin by getting the query parameters from the request. 
Query strings are accessed through the flask <code>request</code> object.</p>
<pre><code class="language-py">zipcode = request.args.get(&quot;zipcode&quot;)
read_key = request.args.get(&quot;read_key&quot;)
</code></pre>
<p>If the zipcode or read key is not provided, we return an error message. </p>
<p>We then convert the zipcode into a latitude and longitude. We use the latitude and longitude to create a binding box around the zipcode. This binding box is used to query the PurpleAir API for sensors within the zipcode. To provide PurpleAir with the bounding box and the many other fields we access, we use the <code>requests.get()</code> function from teh requests library. The function allows us to pass in a url and a dictionary of query parameters. </p>
<pre><code class="language-py">url = &quot;https://www.api.purpleair.com/v1/sensors/&quot;
params = {
    &quot;fields&quot;: &quot;sensor_index,latitude,longitude,temperature,IAQI&quot;,
    &quot;key&quot;: read_key,
    &quot;nwlat&quot;: nwlat,
    &quot;nwlng&quot;: nwlng,
    &quot;selat&quot;: selat,
    &quot;selng&quot;: selng,
}
response = requests.get(url, params=params)
</code></pre>
<p>If we are to move away from using purpleair as our data source, we can simply change the url and the contents of the <code>params</code> dictionary.</p>
<p>If no sensors are found, we return an error message. Otherwise, we take the returned sensor data and format it accordingly to be returned.</p>
<p>To send data back as a json object, we use the <code>jsonify()</code> function from the flask library. </p>
<pre><code class="language-py">@app.route(&quot;/example&quot;)
def example():
    return jsonify({
        &quot;IAQI&quot;: IAQI,
        &quot;zipcode&quot;: zipcode
    })
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="deployment"><a class="header" href="#deployment">Deployment</a></h1>
<h2 id="1-creating-an-account"><a class="header" href="#1-creating-an-account">1. Creating an account:</a></h2>
<p>In order to use the API from anywhere on any machine, one would need to deploy the API to a hosting service. The hosting service we picked is <a href="https://render.com">render</a>. </p>
<p>(if an account has not already been created) When signing up for an account, make sure to do so using the GitHub account which owns the repository containing the code you'd like to deploy. This is to make it convenient for quickly selecting repositories on your GitHub account direcly from within <a href="https://render.com">render</a>.</p>
<h2 id="2-creating-a-new-service"><a class="header" href="#2-creating-a-new-service">2. Creating a new service:</a></h2>
<ol>
<li>After logging in, click the 'new +' button near the profile icon and select webservice. Selecting webservice allows us to deploy applications that will be serving data to its users. Please check out the <a href="https://render.com/docs/web-services">Web Services documentation</a> on render.</li>
</ol>
<p><img src="https://user-images.githubusercontent.com/97417536/227998672-545b6d4c-d7a5-4f14-b137-43d182c32331.png" alt="image" /></p>
<ol start="2">
<li>Select the GitHub repository containing the code you'd like to deploy. In this case, it will be <code>cool-corridors-API</code></li>
</ol>
<p><img src="https://user-images.githubusercontent.com/97417536/228000965-951b5bcb-3af5-420a-a80e-abf0fc992b9d.png" alt="image" /></p>
<ol start="3">
<li>You will now be greeted with this menu to fill out:</li>
</ol>
<p><img src="https://user-images.githubusercontent.com/97417536/228002777-a42f487c-812e-4986-a030-c91679dfcb48.png" alt="image" /></p>
<p>Here's what each field mean, feel free to also checkout the <a href="https://render.com/docs/web-services#deploy-your-own-code">documentation</a>:</p>
<ul>
<li><code>Name</code>: A name for your Web Service</li>
<li><code>Runtime</code>: The programming language of your code, which is Python. </li>
<li><code>Region</code>: The <a href="https://render.com/docs/regions">geographic region</a> to deploy to</li>
<li><code>Branch</code>: The git branch to build. At the moment, the branch used is <code>gunicorn-testing</code></li>
<li><code>Root directory</code>: The directory which the application is ran from. Keep this as default because the root directory contains a file named <code>run.py</code> which is responsble for running the code in <code>/src</code></li>
<li><code>Build Command</code>: The command to build your Web Service. Because all the API dependencies of the project are in <code>requirements.txt</code>, set this field to <code>pip install -r requirements.txt</code>. If new packages/dependencies are later on added to the project, run <code>pip freeze &gt; requirements.txt</code> within the project root directory to get an up to date <code>requirements.txt</code> file.</li>
<li><code>Start Command</code>: The command to start your Web Service. The command is <code>gunicorn run:app</code> where <code>app.py</code> is in the root directory of the repository. We decided to use <a href="https://gunicorn.org/">gunicorn</a> because it can make the application handle more requests per second. More on this is elaborated below. </li>
</ul>
<h3 id="why-use-gunicorn"><a class="header" href="#why-use-gunicorn">Why use gunicorn?</a></h3>
<p>Flask is a light weight framework great for developing applications locally on your machine. However, flask on its own can only handle one request at a time in sequential order, making it less ideal for deployment into production. </p>
<p>Turns out that its best practice to run flask code using <a href="https://gunicorn.org/">gunicorn</a>. 
This is because gunicorn uses a <a href="https://docs.gunicorn.org/en/stable/design.html">pre-fork model</a> which has 
multiple processes called &quot;workers&quot; that can indidivually handle API requests. These processes are handled by a &quot;Master Process&quot; that manages the number of running workers based on how many API requests are made at a given time. 
The result is that we have a faster application that can handle multiple requests at the same time as opposed to just one at a time. </p>
<p><a href="https://blog.ironboundsoftware.com/2016/06/27/faster-flask-need-gunicorn/">article</a></p>
<h2 id="plan"><a class="header" href="#plan">Plan</a></h2>
<p>Scrolling further down from <code>Start Command</code>, you can select the plan to host the API with. You can specify the amount of RAM and how many CPUs your Web Service requires. We selected the free plan for now, but higher tiers can handle more traffic load.</p>
<p><img src="https://user-images.githubusercontent.com/97417536/228021569-ada52763-f00f-4b4f-a22c-e9549d925dae.png" alt="image" /></p>
<h2 id="advanced"><a class="header" href="#advanced">Advanced:</a></h2>
<p>Within <code>Advanced</code>, you may also specify environment variables, secrets, persistent disk, health check path, and whether or not to auto deploy on every git push.</p>
<p><img src="https://user-images.githubusercontent.com/97417536/228029117-93da1d34-41e4-4569-9381-fea5f443030a.png" alt="image" /></p>
<p>For this section, we need to do two things:</p>
<ol>
<li>Add an environment variable to specifiy the Python version for render to use for deployment. </li>
</ol>
<pre><code>Key: PYTHON_VERSION
Value: 3.9.10
</code></pre>
<p><img src="https://user-images.githubusercontent.com/97417536/228029988-7ef15efa-2c03-4915-b5ac-45c082ccdc8f.png" alt="image" /></p>
<ol start="2">
<li>Add a <code>.env</code> file containing PurpleAir API read and write keys. Conventionally, <code>.env</code> is added to the <code>.gitignore</code> of project repositories in order to keep senstitive information needed to run the API hidden and safe. However, there's no way for render to have access for this file unless we explicitly specify it here:</li>
</ol>
<p><img src="https://user-images.githubusercontent.com/97417536/228032291-aa7e0043-bc7d-49a2-8ece-4b59b76d33bb.png" alt="image" /></p>
<ul>
<li>
<p>Filename: <code>.env</code></p>
</li>
<li>
<p>contents: </p>
<pre><code class="language-ini">Make sure to have the keys enclosed in quotiation marks

READ_KEY = &quot;INSERT_READ_KEY_HERE&quot;
WRITE_KEY = &quot;INSERT_WRITE_KEY_HERE&quot;
</code></pre>
</li>
</ul>
<p><strong>Once all of this has been set, click the Create Web Service button all the way at the bottom:</strong></p>
<p><img src="https://user-images.githubusercontent.com/97417536/228036086-da582277-8da2-4405-983d-41f64e7298f6.png" alt="image" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="setting-up-development-environment"><a class="header" href="#setting-up-development-environment">Setting Up Development Environment</a></h1>
<p>To set up development environment you need to do the following:</p>
<ol>
<li>
<p>Clone the Reposository</p>
<pre><code class="language-bash">git clone https://github.com/Cool-Corridors/cool-corridors-API.git
</code></pre>
</li>
<li>
<p>Set up anaconda virtual environment and activate it:</p>
<pre><code class="language-bash">pip -m venv IQS
</code></pre>
<pre><code class="language-bash">source IQS/bin/activate
</code></pre>
</li>
<li>
<p>After activating the environment, install the following packages:</p>
<pre><code class="language-bash">pip install flask
pip install python-dotenv
pip install geocoder
</code></pre>
</li>
<li>
<p>Install the following packages:</p>
<pre><code class="language-bash">pip install -r requirements.txt
</code></pre>
</li>
<li>
<p>set up a <code>.env</code> file with the appropriate API keys:</p>
<blockquote>
<p>To be able to fetch data from the <a href="https://api.purpleair.com/">PurpleAir API</a>, you need to first <a href="https://community.purpleair.com/t/how-to-obtain-an-api-key/1238">contact</a> their team by <a href="contact@purpleair.com">email</a> to obtain read and write API keys.</p>
</blockquote>
<p>Once the keys are obtained, set up your environment variables file</p>
<pre><code class="language-bash">cp .env.example .env
</code></pre>
<p>How <code>.env</code> will look:</p>
<pre><code class="language-init">READ_KEY=
WRITE_KEY=
</code></pre>
<p>and then paste the API keys into the corresponding fields.</p>
</li>
<li>
<p>Run the app:</p>
<pre><code class="language-bash">gunicorn run:app
</code></pre>
</li>
</ol>
<h2 id="notes"><a class="header" href="#notes">Notes:</a></h2>
<ul>
<li>
<p>We use gunicorn to run the app because that is what our deployment uses. As such, you need to be on linux to actually run this app locally on your machine. If you are on windows, consider looking into <a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10">WSL</a> or <a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10#step-4---download-the-linux-kernel-update-package">WSL2</a>.</p>
</li>
<li>
<p>We use pip instead of conda (for now) because of the <code>requirements.txt</code> file. We need this to deploy and conda does not support this. </p>
</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
